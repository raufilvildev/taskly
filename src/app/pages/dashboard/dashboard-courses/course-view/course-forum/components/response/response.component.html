<div class="flex pt-3 p-1 gap-2">
  <div class="pt-1">
    <img
      [src]="response.user.img_url"
      [alt]="'Imagen de perfil de' + response.user.first_name + ' ' + response.user.last_name"
      class="w-10 h-10 bg-gray-900 rounded-full object-cover object-center"
    />
  </div>

  <div class="flex flex-col flex-1 gap-2">
    <div class="flex items-center gap-2">
      <div class="flex-1 flex flex-col sm:flex-row gap-1 sm:gap-2">
        <h3
          class="text-sm font-bold truncate"
          [class.text-custom-text-main]="response.user.role === 'student'"
          [class.text-custom-accent-dark]="response.user.role === 'teacher'"
        >
          {{ response.user.first_name }} {{ response.user.last_name }}
        </h3>
        <p class="text-sm text-custom-text-secondary">
          {{ response.updated_at ? '(' + response.updated_at + ')' : '' }}
        </p>
        @if (response.created_at !== response.updated_at) {
          <p class="text-[0.5rem] text-custom-text-secondary italic">Editado</p>
        }
      </div>
      @if (response.user.uuid === user.uuid) {
        <div class="flex gap-3">
          <div
            class="p-2 w-8 h-8 rounded-full hover:bg-custom-background/75 transition-all duration-300 transform hover:scale-110 flex items-center justify-center cursor-pointer"
          >
            @if (
              !showResponseForm ||
              editedResponseUuid !== response.uuid ||
              threadUuidWhereAResponseIsBeingEdited !== threadUuid
            ) {
              <img
                src="edit.svg"
                alt="Editar respuesta"
                class="w-6 h-6"
                (click)="updateThread(true, response.uuid)"
              />
            }
            @if (
              showResponseForm &&
              editedResponseUuid === response.uuid &&
              threadUuidWhereAResponseIsBeingEdited === threadUuid
            ) {
              <img
                src="cancel_edit.svg"
                alt="Cancelar ediciÃ³n de respuesta"
                class="w-6 h-6"
                (click)="updateThread(false, response.uuid)"
              />
            }
          </div>
          <div
            class="p-2 w-8 h-8 rounded-full hover:bg-custom-background/75 transition-all duration-300 transform hover:scale-110 flex items-center justify-center cursor-pointer"
          >
            <img
              src="remove.svg"
              alt="Borrar respuesta"
              class="w-6 h-6"
              (click)="deleteResponse(response.uuid)"
            />
          </div>
        </div>
      }
    </div>
    <div class="flex flex-col">
      @if (
        !showResponseForm ||
        editedResponseUuid !== response.uuid ||
        threadUuidWhereAResponseIsBeingEdited !== threadUuid
      ) {
        <p class="text-custom-main text-sm">
          {{ response.content }}
        </p>
      }

      @if (
        showResponseForm &&
        editedResponseUuid === response.uuid &&
        threadUuidWhereAResponseIsBeingEdited === threadUuid
      ) {
        <app-response-form
          [token]="token"
          [user]="user"
          [type]="'edit'"
          [content]="response.content"
          (edit)="updateThread(false, response.uuid)"
        ></app-response-form>
      }
    </div>
  </div>
</div>
