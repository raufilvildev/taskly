<form
  [formGroup]="userSettingsForm"
  (ngSubmit)="updateUser()"
  class="flex-1 p-6 bg-white shadow-md dark:bg-transparent rounded-lg shadow-xl"
>

  <h1 class="text-2xl text-center lg:text-left md:text-left font-bold mb-6 text-gray-800 dark:text-white">
    Ajustes de Usuario
  </h1>

  <div class="flex flex-col-reverse md:flex-row lg:flex-row flex-1 gap-10 items-start">  
  <div class="flex flex-col gap-5 items-stretch w-full lg:w-1/2 md:w-1/2">
    <app-user-fieldset
      label="Nombre"
      controlName="first_name"
      [formGroup]="userSettingsForm"
      [isEditing]="editUserForm['first_name']"
      [value]="user.first_name"
      (toggleEdit)="updateUserFormState($event)"
      [validation]="['minlength', 'maxlength']"
      (saveEdit)="onSaveField($event)"
    ></app-user-fieldset>

    <app-user-fieldset
      label="Apellidos"
      controlName="last_name"
      [formGroup]="userSettingsForm"
      [isEditing]="editUserForm['last_name']"
      [value]="user.last_name"
      (toggleEdit)="updateUserFormState($event)"
      [validation]="['minlength', 'maxlength']"
      (saveEdit)="onSaveField($event)"
    ></app-user-fieldset>

    <app-user-fieldset
      label="Nombre de usuario"
      controlName="username"
      [formGroup]="userSettingsForm"
      [isEditing]="editUserForm['username']"
      [value]="user.username"
      [type]="'text'"
      (toggleEdit)="updateUserFormState($event)"
      [validation]="['minlength', 'maxlength']"
      (saveEdit)="onSaveField($event)"

    ></app-user-fieldset>

    <app-user-fieldset
      label="Fecha de nacimiento"
      controlName="birth_date"
      [formGroup]="userSettingsForm"
      [isEditing]="editUserForm['birth_date']"
      [value]="formattedBirthDate"
      [type]="'date'"
      (toggleEdit)="updateUserFormState($event)"
      [validation]="['minlength', 'maxlength']"
      (saveEdit)="onSaveField($event)"
    ></app-user-fieldset>
    </div>

    <fieldset class="flex flex-col items-center justify-center gap-4 w-full md:w-1/2 lg:w-1/2">
      <img
      [src]="userImageUrl"
      alt="Imagen de perfil"
      class="w-72 h-72 object-cover rounded-full border border-gray-300 shadow mx-auto"
      />
      <label for="profile-image" class="cursor-pointer w-fit px-3 py-2 rounded-lg text-white bg-custom-accent hover:bg-custom-accent-dark hover:bg-custom-accent-dark dark:bg-purple-800 dark:hover:bg-purple-900 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
        Cambiar imagen
      </label>
      <input
        type="file"
        name="profile-image"
        id="profile-image"
        accept="image/*"
        class="hidden"
        (change)="onImageSelected($event)"        
      />
  </fieldset>

  </div>
</form>
