<div class="p-10 w-full flex flex-col gap-2 bg-custom-panel">
  @for (comment of comments; track comment.uuid) {
    <div class="max-w-200 flex flex-col rounded-lg shadow-xl p-5">
      <div class="flex flex-col p-3">
        <app-comment
          [comment]="{
            user: comment.user,
            created_at: comment.created_at,
            updated_at: comment.updated_at,
            content: comment.content,
          }"
        ></app-comment>
      </div>

      @if (shouldShowResponses(comment.uuid)) {
        @for (response of comment.responses; track response.uuid) {
          <div class="pl-5 p-3 border-t border-custom-muted">
            <app-comment
              [comment]="{
                user: response.user,
                created_at: response.created_at,
                updated_at: response.updated_at,
                content: response.content,
              }"
            ></app-comment>
          </div>
        }
      }

      <a
        (click)="changeShowStatus(comment.uuid)"
        class="mx-auto w-fit mb-1 text text-xs text-center text-custom-text-secondary hover:underline cursor-pointer"
      >
        {{ shouldShowResponses(comment.uuid) ? 'Ocultar respuestas' : 'Mostrar respuestas' }}
      </a>
      <a
        (click)="showResponseForm = !showResponseForm"
        class="mt-2 block text-sm text-right text-blue-500 cursor-pointer"
      >
        Responder
      </a>

      @if (showResponseForm) {
        <div class="pl-10 border-t border-custom-muted">
          <p>Formulario para crear respuesta</p>
        </div>
      }
    </div>
  }
</div>
